var DefaultInputHandler = (function () {
    function DefaultInputHandler() {
        this.bucket = {};
    }
    DefaultInputHandler.prototype.handle = function (node, targetNode, targetPort, data, targetSources) {
        this.bucketMode = false;
        var targetInputPort = targetNode.ports.input[targetPort];
        if (targetInputPort.type == "array") {
            if (targetSources.length > 0) {
                if (!this.bucket.hasOwnProperty(targetNode.id))
                    this.bucket[targetNode.id] = {};
                if (!this.bucket[targetNode.id].hasOwnProperty(targetPort))
                    this.bucket[targetNode.id][targetPort] = [];

                this.bucket[targetNode.id][targetPort].push(data);

                this.bucketMode = true;

                if (targetSources.length === this.bucket[targetNode.id][targetPort].length) {
                    var data = this.bucket[targetNode.id][targetPort];
                    this.bucket[targetNode.id][targetPort] = [];
                    return data;
                } else {
                    return false;
                }
            } else {
                return data;
            }
        } else {
            return data;
        }
    };
    return DefaultInputHandler;
})();

module.exports = DefaultInputHandler;
